<div class="card">
  <div class="card-header">
    <div class="row">
      <div class="col col-md-6">
        <h5 class="card-title">{{ '::Menu:SportActivities' | abpLocalization }}</h5>
      </div>        
      <div class="text-end col col-md-6">
          
        <!-- Add the "new SportActivity" button here -->
        <div class="text-lg-end pt-2">
          <button *abpPermission="'SportAct.SportActivities.Create'" id="create" class="btn btn-primary" type="button" (click)="createSportActivity()">
            <i class="fa fa-plus mr-1"></i>
            <span>{{ "::NewSportActivity" | abpLocalization }}</span>
          </button>
        </div>
          
      </div>
    </div>
  </div>
    <div class="card-body" *ngIf="!loadingData" >
       <ngx-datatable [rows]="sportactivity.items" [count]="sportactivity.totalCount" [list]="list" default>
        <ngx-datatable-column
          [name]="'::Actions' | abpLocalization"
          [maxWidth]="150"
          [sortable]="false"
        >
          <ng-template let-row="row" ngx-datatable-cell-template>
            <div ngbDropdown container="body" class="d-inline-block">
              <button
                class="btn btn-primary btn-sm dropdown-toggle"
                data-toggle="dropdown"
                aria-haspopup="true"
                ngbDropdownToggle
              >
                <i class="fa fa-cog mr-1"></i>{{ '::Actions' | abpLocalization }}
              </button>
              <div ngbDropdownMenu>
                <button *abpPermission="'SportAct.SportActivities.Edit'" ngbDropdownItem (click)="editSportActivity(row.id)">
                  {{ '::Edit' | abpLocalization }}
                </button>
                <button *abpPermission="'SportAct.SportActivities.Delete'" ngbDropdownItem (click)="delete(row.id)">
                  {{ '::Delete' | abpLocalization }}
              </button>
              <button *abpPermission="'SportAct.Reservations.Create'" ngbDropdownItem (click)="reserveActivity(row.id)">
                {{ '::Reserve' | abpLocalization }}
            </button>
              </div>
            </div>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column   [name]="'::ActivityName' | abpLocalization">
          {{sportactivity.items.ActivityName | json}}
        </ngx-datatable-column>
        <ngx-datatable-column
          [name]="'::Location' | abpLocalization"
          prop="locationName"
          [sortable]="false"
        ></ngx-datatable-column>
        <ngx-datatable-column
          [name]="'::ActivityType' | abpLocalization"
          prop="activityTypeName"
          [sortable]="false"
        ></ngx-datatable-column>
        <ngx-datatable-column [width]="100"  [name]="'::Capacity' | abpLocalization">
          {{sportactivity.items.Capacity | json}}
        </ngx-datatable-column>
        <ngx-datatable-column  [width]="100" [name]="'::Cost' | abpLocalization">
          {{sportactivity.items.Cost | json}}
        </ngx-datatable-column>
        <ngx-datatable-column  [width]="100" [name]="'::MinimumAge' | abpLocalization">
          {{sportactivity.items.MinimumAge | json}}
        </ngx-datatable-column>
        <ngx-datatable-column [width]="100"  [name]="'::MaximumAge' | abpLocalization">
          {{sportactivity.items.MaximumAge | json}}
        </ngx-datatable-column>
        <ngx-datatable-column [width]="125"  [name]="'::StartedTime' | abpLocalization">
          {{sportactivity.items.StartedTime | json}}
        </ngx-datatable-column>
        <ngx-datatable-column [width]="125"  [name]="'::EndedTime' | abpLocalization">
          {{sportactivity.items.EndedTime | json}}
        </ngx-datatable-column>
        <ngx-datatable-column  [width]="500" [name]="'::Description' | abpLocalization">
          {{sportactivity.items.Description | json}}
        </ngx-datatable-column>
        
      </ngx-datatable>
    </div>
    
  </div>
  <abp-modal [(visible)]="isModalOpen">
    <ng-template #abpHeader>
      <h3>{{ (selectedSportActivity.id ? '::Edit' : '::NewSportActivity' ) | abpLocalization }}</h3>
    </ng-template>
  
    
    <ng-template #abpBody>
      <form [formGroup]="form" (ngSubmit)="save()">
        
        <div class="form-group">
          <label for="sportactivity-name">ActivityName</label><span> * </span>
          <input type="text" id="sportactivity-name" class="form-control" formControlName="ActivityName" autofocus />
        </div>
        <div class="form-group">
          <label for="location-id">Location</label><span> * </span>
          <select class="form-control" id="location-id" formControlName="locationId">
            <option [ngValue]="null">Select location</option>
            <option [ngValue]="location.id" *ngFor="let location of locations$ | async" >
              {{ location.locationName }}
            </option>
          </select>
        </div>
        <div class="form-group">
          <label for="activitytype-id">ActivityType</label><span> * </span>
          <select class="form-control" id="activitytype-id" formControlName="activitytypeId">
            <option [ngValue]="null">Select activity type</option>
            <option [ngValue]="activitytype.id" *ngFor="let activitytype of activitytypes$ | async" >
              {{ activitytype.activityTypeName }}
            </option>
          </select>
        </div>
        <div class="form-group">
          <label for="sportactivity-capacity">Capacity</label><span> * </span>
          <input type="number" id="sportactivity-capacity" class="form-control" formControlName="Capacity" autofocus />
        </div>

        <div class="form-group">
          <label for="sportactivity-cost">Cost</label><span> * </span>
          <input type="number" id="sportactivity-cost" class="form-control" formControlName="Cost" autofocus />
        </div>

        <div class="form-group">
          <label for="sportactivity-minimumage">MinimumAge</label><span> * </span>
          <input type="number" id="sportactivity-minimumage" class="form-control" formControlName="MinimumAge" autofocus />
        </div>

        <div class="form-group">
          <label for="sportactivity-maximumage">MaximumAge</label><span> * </span>
          <input type="number" id="sportactivity-maximumage" class="form-control" formControlName="MaximumAge" autofocus />
        </div>

        <div class="form-group">
          <label for="sportactivity-startedtime">StartedTime</label><span> * </span>
          <input
        #datepicker="ngbDatepicker"
        class="form-control"
        id="sportactivity-startedtime"
        name="datepicker"
        formControlName="StartedTime"
        ngbDatepicker
        (click)="datepicker.toggle()"
      />
          <!-- <input type="datetime" id="sportactivity-startedtime" class="form-control" formControlName="StartedTime" autofocus /> -->
        </div>
        

        <div class="form-group">
          <label for="sportactivity-endedtime">EndedTime</label><span> * </span>
          <input
        #datepicker1="ngbDatepicker"
        class="form-control"
        id="sportactivity-endedtime"
        name="datepicker"
        formControlName="EndedTime"
        ngbDatepicker
        (click)="datepicker1.toggle()"
      />
          <!-- <input type="datetime" id="sportactivity-endedtime" class="form-control" formControlName="EndedTime" autofocus /> -->
        </div>

        <div class="form-group">
          <label for="sportactivity-description">Description</label><span> * </span>
          <input type="text" id="sportactivity-description" class="form-control" formControlName="Description" autofocus />
        </div>
      </form>
    </ng-template>
  
    <ng-template #abpFooter>
      <button type="button" class="btn btn-secondary" abpClose>
          {{ '::Close' | abpLocalization }}
      </button>
    
      <!--added save button-->
      <button class="btn btn-primary" (click)="save()" [disabled]="form.invalid">
            <i class="fa fa-check mr-1"></i>
            {{ '::Save' | abpLocalization }}
      </button>
    </ng-template>
  </abp-modal>